{"ast":null,"code":"let socket;\nlet subscribers = [];\nexport function connectWebSocket(url) {\n  if (!socket) {\n    socket = new WebSocket(url);\n    socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      subscribers.forEach(fn => fn(data));\n    };\n  }\n}\nexport function sendMessage(message) {\n  if (socket && socket.readyState === WebSocket.OPEN) {\n    socket.send(JSON.stringify(message));\n  }\n}\nexport function subscribeToMessages(fn) {\n  subscribers.push(fn);\n  return () => {\n    subscribers = subscribers.filter(sub => sub !== fn);\n  };\n}","map":{"version":3,"names":["socket","subscribers","connectWebSocket","url","WebSocket","onmessage","event","data","JSON","parse","forEach","fn","sendMessage","message","readyState","OPEN","send","stringify","subscribeToMessages","push","filter","sub"],"sources":["F:/Conversational Browser Control agent/frontend/src/services/websocket_client.js"],"sourcesContent":["let socket;\r\nlet subscribers = [];\r\n\r\nexport function connectWebSocket(url) {\r\n  if (!socket) {\r\n    socket = new WebSocket(url);\r\n    socket.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      subscribers.forEach(fn => fn(data));\r\n    };\r\n  }\r\n}\r\n\r\nexport function sendMessage(message) {\r\n  if (socket && socket.readyState === WebSocket.OPEN) {\r\n    socket.send(JSON.stringify(message));\r\n  }\r\n}\r\n\r\nexport function subscribeToMessages(fn) {\r\n  subscribers.push(fn);\r\n  return () => {\r\n    subscribers = subscribers.filter(sub => sub !== fn);\r\n  };\r\n} "],"mappings":"AAAA,IAAIA,MAAM;AACV,IAAIC,WAAW,GAAG,EAAE;AAEpB,OAAO,SAASC,gBAAgBA,CAACC,GAAG,EAAE;EACpC,IAAI,CAACH,MAAM,EAAE;IACXA,MAAM,GAAG,IAAII,SAAS,CAACD,GAAG,CAAC;IAC3BH,MAAM,CAACK,SAAS,GAAIC,KAAK,IAAK;MAC5B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;MACnCN,WAAW,CAACS,OAAO,CAACC,EAAE,IAAIA,EAAE,CAACJ,IAAI,CAAC,CAAC;IACrC,CAAC;EACH;AACF;AAEA,OAAO,SAASK,WAAWA,CAACC,OAAO,EAAE;EACnC,IAAIb,MAAM,IAAIA,MAAM,CAACc,UAAU,KAAKV,SAAS,CAACW,IAAI,EAAE;IAClDf,MAAM,CAACgB,IAAI,CAACR,IAAI,CAACS,SAAS,CAACJ,OAAO,CAAC,CAAC;EACtC;AACF;AAEA,OAAO,SAASK,mBAAmBA,CAACP,EAAE,EAAE;EACtCV,WAAW,CAACkB,IAAI,CAACR,EAAE,CAAC;EACpB,OAAO,MAAM;IACXV,WAAW,GAAGA,WAAW,CAACmB,MAAM,CAACC,GAAG,IAAIA,GAAG,KAAKV,EAAE,CAAC;EACrD,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}